<div class="detail-group clearfix first">
	<div class="form-group btn-group btn-group-justified">
		<div class="btn-group clearfix">
			<button type="button" class="btn btn-default" ng-click="setRequestMappingType('keyValue')"
					ng-model="model.requestMappingType"
					ng-class="{'active' : model.requestMappingType === 'keyValue'}">
				{{'FORM-BUILDER.COMPONENT.REQUEST-KEY-VALUE-MAPPING' | translate}}
			</button>
		</div>
		<div class="btn-group clearfix">
			<button type="button" class="btn btn-default" ng-click="setRequestMappingType('jsonTemplate')"
					ng-model="model.requestMappingType"
					ng-class="{'active' : model.requestMappingType === 'jsonTemplate'}">
				{{'FORM-BUILDER.COMPONENT.REQUEST-JSON-TEMPLATE-MAPPING' | translate}}
			</button>
		</div>
	</div>

	<div ng-show="model.requestMappingType === 'keyValue'">
		<div class="col-xs-12">
			<div class="step-editor-inline-grid" ui-grid="requestMessageGridOptions" ui-grid-selection></div>
			<div class="pull-right">
				<div class="btn-group">
					<a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.ADD | translate}}"
					   data-placement="bottom" data-original-title=""
					   title="" id="add-request-mapping-button" ng-click="addNewRequestMapping()"><i
							class="glyphicon glyphicon-plus"></i></a>
					<a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.REMOVE | translate}}"
					   ng-disabled="!selectedRequestMapping"
					   data-placement="bottom" data-original-title="" title=""
					   ng-click="removeRequestMapping()"><i class="glyphicon glyphicon-minus"></i></a>
				</div>
				<div class="btn-group">
					<a class="btn btn-icon btn-lg" rel="tooltip" data-title="{{ACTION.EDIT | translate}}"
					   ng-disabled="!selectedRequestMapping" data-placement="bottom" data-original-title=""
					   title="" id="edit-request-mapping-button" ng-click="editRequestMapping()"><i
							class="glyphicon glyphicon-pencil"></i></a>
				</div>
			</div>
		</div>
	</div>

	<div ng-show="model.requestMappingType === 'jsonTemplate'">
		<div class="col-xs-12">
			<div class="detail-group clearfix">
				<div class="row">
					<div class="col-md-12">
						<div class="form-group">
							<label translate="FORM-BUILDER.COMPONENT.REQUEST-JSON-TEMPLATE-MAPPING"></label>
							<div ui-ace="{mode: 'json-template', onLoad: setAceEditor}" ng-model="step.requestMappingJSONTemplate" style="height: 400px;border:1px solid lightgray;"></div>
							<div class="subtle" translate="FORM-BUILDER.MESSAGE.READONLY-TEXT-HELP" style="padding: 5px 0 5px 1px;"></div>
						</div>
					</div>
				</div>
				<div class="form-group btn-group btn-group-justified">
					<div class="btn-group clearfix">
						<button type="button" class="btn btn-default" ng-click="setJSONFieldType('formField')" ng-model="model.jsonFieldType"
								ng-class="{'active' : model.jsonFieldType === 'formField'}">{{'FORM-BUILDER.VISIBILITY.RIGHT-FORM-FIELD' | translate}}
						</button>
					</div>
					<div class="btn-group clearfix">
						<button type="button" class="btn btn-default" ng-click="setJSONFieldType('restResponse')" ng-model="model.jsonFieldType"
								ng-class="{'active' : model.jsonFieldType === 'restResponse'}">{{'FORM-BUILDER.VISIBILITY.RESPONSE-VARIABLE' | translate}}
						</button>
					</div>
				</div>

				<div ng-show="model.jsonFieldType === 'formField'">
					<div>
						<div field-select="insertFormField.field" include-type="true" expand-relative="true" all-steps="allSteps" step-id="stepId"
							 select-title="'FORM-BUILDER.MESSAGE.READONLY-TEXT-INSERT-FIELD'" field-type-filter="allowedTypes"></div>
					</div>
				</div>

				<div ng-show="model.jsonFieldType === 'restResponse'">
					<div>
						<div field-select="insertFormField.field" include-type="true" variables-type="rest" editor-type="step" expand-relative="true"
							 all-steps="allSteps" step-id="stepId"
							 select-title="'FORM-BUILDER.MESSAGE.READONLY-TEXT-INSERT-RESPONSE-VARIABLE'"></div>
					</div>
				</div>
			</div>
		</div>

	</div>

</div>

<div style="border-top: solid 1px #000;padding:10px;" class="form-group" ng-controller="RestCallStepHeadersController">
<label translate="FORM-BUILDER.COMPONENT.REQUEST-HEADERS-LABEL"></label>
	<div style="padding-top:5px;" class="row row-no-gutter">
		<div class="col-xs-6">
			<div class="kis-listener-grid" ui-grid="gridOptions"
				ui-grid-auto-resize ui-grid-selection></div>
			<div class="pull-right">
				<div class="btn-group">
					<a class="btn btn-icon btn-lg" rel="tooltip"
						data-title="{{ACTION.ADD | translate}}" data-placement="bottom"
						data-original-title="" title="" id="add-request-header-button"
						ng-click="addNewRequestHeader()"><i
						class="glyphicon glyphicon-plus"></i></a> 
						<a class="btn btn-icon btn-lg" rel="tooltip"
						data-title="{{ACTION.REMOVE | translate}}"
						ng-disabled="!selectedRequestHeader" data-placement="bottom"
						data-original-title="" title="" ng-click="removeRequestHeader()"><i
						class="glyphicon glyphicon-minus"></i></a>
				</div>
			</div>
		</div>

		<div class="col-xs-6">
			<div ng-if="selectedRequestHeader" ng-form="requestHeadersForm">
				<div class="form-group"
					ng-class="{'has-error': requestHeadersForm.headerName.$invalid}">
					<label for="headerName"
						translate="FORM-BUILDER.COMPONENT.REQUEST-HEADER-NAME"></label> <input
						type="text" id="headerName" name="headerName" class="form-control"
						ng-model="selectedRequestHeader.name" ng-required="true"
						placeholder="{{'FORM-BUILDER.COMPONENT.PLACEHOLDER-REQUEST-HEADER-NAME' | translate}}">
				</div>
				<div class="form-group"
					ng-class="{'has-error': requestHeadersForm.headerValue.$invalid}">
					<label for="headerValue"
						translate="FORM-BUILDER.COMPONENT.REQUEST-HEADER-VALUE"></label> <input
						type="text" id="headerValue" name="headerValue" ng-required="true"
						class="form-control" ng-model="selectedRequestHeader.value"
						store-cursor-position="restHeaderConfig.position"
						placeholder="{{'FORM-BUILDER.COMPONENT.PLACEHOLDER-REQUEST-HEADER-VALUE' | translate}}">
				</div>

				<div class="form-group">
					<div class="btn-group btn-group-justified">
						<div class="btn-group">
							<button type="button" class="btn btn-default"
								ng-click="setUrlFieldType('formField')"
								ng-model="model.headerFieldType"
								ng-class="{'active' : model.headerFieldType === 'formField'}">{{'FORM-BUILDER.VISIBILITY.RIGHT-FORM-FIELD'
								| translate}}</button>
						</div>
						<div class="btn-group">
							<button type="button" class="btn btn-default"
								ng-click="setUrlFieldType('restResponse')"
								ng-model="model.headerFieldType"
								ng-class="{'active' : model.headerFieldType === 'restResponse'}">{{'FORM-BUILDER.VISIBILITY.RESPONSE-VARIABLE'
								| translate}}</button>
						</div>
					</div>

					<div ng-show="model.headerFieldType === 'formField'">
						<div>
							<div class="subtle"
								translate="FORM-BUILDER.MESSAGE.REQUEST-HEADER-INSERT-FIELD-HELP"
								style="padding: 5px 0 5px 1px;"></div>
							<div field-select="restHeaderConfig.field" include-type="true"
								expand-relative="true" all-steps="allSteps" step-id="step.id"
								select-title="'FORM-BUILDER.MESSAGE.READONLY-TEXT-INSERT-FIELD'"
								field-type-filter="allowedTypes"></div>
						</div>
					</div>

					<div ng-show="model.headerFieldType === 'restResponse'">
						<div>
							<div class="subtle"
								translate="FORM-BUILDER.MESSAGE.REQUEST-HEADER-INSERT-VARIABLE-HELP"
								style="padding: 5px 0 5px 1px;"></div>
							<div field-select="restHeaderConfig.field" include-type="true" step-id="step.id"
								variables-type="rest" editor-type="step" expand-relative="true" all-steps="allSteps"
								select-title="'FORM-BUILDER.MESSAGE.READONLY-TEXT-INSERT-RESPONSE-VARIABLE'"></div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>