
<div class="modal" ng-controller="IdmUserBulkUpdatePopupController">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header-wrapper">
                <div class="modal-header">
                    <button type="button" class="close" ng-click="$hide()">&times;</button>
                    <h2 class="modal-title">{{'IDM.USER-MGMT.POPUP.BULK-UPDATE-PRIMARY-GROUP-TITLE' | translate}}</h2>
                </div>
            </div>

            <div class="modal-body">

                <form role="form" style="margin-bottom: 20px;">
                    <div class="form-group">
                        <label>{{'IDM.USER-MGMT.POPUP.BULK-UPDATE-PRIMARY-GROUP' | translate}}</label>
                        <span class="action">
                                <a select-functional-group-popover
                                   placement="bottom-left"
                                   on-group-selected="model.selectedPrimaryGroup = group; model.updateUsers.primaryGroupId = group.id;"
                                   exclude-group-ids="[model.updateUsers.primaryGroupId]"
                                   style="font-weight: normal">
                                   + {{'IDM.USER-MGMT.POPUP.BULK-UPDATE-PRIMARY-GROUP-ADD' | translate}}
                                </a>
                            </span>
                        <ul class="simple-list pack"
                            ng-if="model.selectedPrimaryGroup">
                            <li>
                                <span><i class="glyphicon glyphicon-list-alt" style="margin-right: 5px;"></i>{{model.selectedPrimaryGroup.name}}</span>
                            </li>
                        </ul>
                    </div>

                    <div ng-if="!model.selectedPrimaryGroup" class="actions">
                        <span>{{'IDM.USER-MGMT.POPUP.BULK-UPDATE-PRIMARY-GROUP-NONE' | translate}}</span>
                        <br/>
                    </div>

                </form>

                <div class="well">
                    <p>{{'IDM.USER-MGMT.POPUP.BULK-UPDATE-PRIMARY-GROUP-USERS' | translate: getSelectedUsers()}}</p>
                    <ul class="user-list">
                        <li ng-repeat="user in getSelectedUsers()">
                            <i class="glyphicon glyphicon-user"></i> {{user.fullname}} <span>({{user.type}} - {{user.email}})</span>
                        </li>
                    </ul>
                </div>

            </div>

            <div class="modal-footer-wrapper">
                <div class="modal-footer">
                    <div class="pull-right">
                        <button type="button" class="btn btn-sm btn-default" ng-click="$hide()" ng-disabled="model.loading">
                            {{'IDM.USER-MGMT.POPUP.BULK-UPDATE-CANCEL' | translate}}
                        </button>
                        <button type="button" class="btn btn-sm btn-default" ng-click="updateUsers();model.selectedPrimaryGroup = null;$hide()" ng-disabled="model.loading || readOnly">
                            {{'IDM.USER-MGMT.POPUP.BULK-UPDATE-PRIMARY-GROUP-CONFIRM' | translate}}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>